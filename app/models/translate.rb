class Translate < ActiveRecord::Base
  private
    Key = "trnsl.1.1.20150807T193721Z.a28754c35f356a3c.9887c0360b34c7c397a5f114144c28840912b234"

  yandex = YandexTranslate::Client.new(Key)
  # Yandex_langs = yandex.get_langs["dirs"]
  Yandex_langs = {"az"=>[{"ru"=>"az-ru"}], "be"=>[{"bg"=>"be-bg"}, {"cs"=>"be-cs"}, {"de"=>"be-de"}, {"en"=>"be-en"}, {"es"=>"be-es"}, {"fr"=>"be-fr"}, {"it"=>"be-it"}, {"pl"=>"be-pl"}, {"ro"=>"be-ro"}, {"ru"=>"be-ru"}, {"sr"=>"be-sr"}, {"tr"=>"be-tr"}], "bg"=>[{"be"=>"bg-be"}, {"ru"=>"bg-ru"}, {"uk"=>"bg-uk"}], "ca"=>[{"en"=>"ca-en"}, {"ru"=>"ca-ru"}], "cs"=>[{"be"=>"cs-be"}, {"en"=>"cs-en"}, {"ru"=>"cs-ru"}, {"uk"=>"cs-uk"}], "da"=>[{"en"=>"da-en"}, {"ru"=>"da-ru"}], "de"=>[{"be"=>"de-be"}, {"en"=>"de-en"}, {"es"=>"de-es"}, {"fr"=>"de-fr"}, {"it"=>"de-it"}, {"ru"=>"de-ru"}, {"tr"=>"de-tr"}, {"uk"=>"de-uk"}], "el"=>[{"en"=>"el-en"}, {"ru"=>"el-ru"}], "en"=>[{"be"=>"en-be"}, {"ca"=>"en-ca"}, {"cs"=>"en-cs"}, {"da"=>"en-da"}, {"de"=>"en-de"}, {"el"=>"en-el"}, {"es"=>"en-es"}, {"et"=>"en-et"}, {"fi"=>"en-fi"}, {"fr"=>"en-fr"}, {"hu"=>"en-hu"}, {"it"=>"en-it"}, {"lt"=>"en-lt"}, {"lv"=>"en-lv"}, {"mk"=>"en-mk"}, {"nl"=>"en-nl"}, {"no"=>"en-no"}, {"pt"=>"en-pt"}, {"ru"=>"en-ru"}, {"sk"=>"en-sk"}, {"sl"=>"en-sl"}, {"sq"=>"en-sq"}, {"sv"=>"en-sv"}, {"tr"=>"en-tr"}, {"uk"=>"en-uk"}], "es"=>[{"be"=>"es-be"}, {"de"=>"es-de"}, {"en"=>"es-en"}, {"ru"=>"es-ru"}, {"uk"=>"es-uk"}], "et"=>[{"en"=>"et-en"}, {"ru"=>"et-ru"}], "fi"=>[{"en"=>"fi-en"}, {"ru"=>"fi-ru"}], "fr"=>[{"be"=>"fr-be"}, {"de"=>"fr-de"}, {"en"=>"fr-en"}, {"ru"=>"fr-ru"}, {"uk"=>"fr-uk"}], "hr"=>[{"ru"=>"hr-ru"}], "hu"=>[{"en"=>"hu-en"}, {"ru"=>"hu-ru"}], "hy"=>[{"ru"=>"hy-ru"}], "it"=>[{"be"=>"it-be"}, {"de"=>"it-de"}, {"en"=>"it-en"}, {"ru"=>"it-ru"}, {"uk"=>"it-uk"}], "lt"=>[{"en"=>"lt-en"}, {"ru"=>"lt-ru"}], "lv"=>[{"en"=>"lv-en"}, {"ru"=>"lv-ru"}], "mk"=>[{"en"=>"mk-en"}, {"ru"=>"mk-ru"}], "nl"=>[{"en"=>"nl-en"}, {"ru"=>"nl-ru"}], "no"=>[{"en"=>"no-en"}, {"ru"=>"no-ru"}], "pl"=>[{"be"=>"pl-be"}, {"ru"=>"pl-ru"}, {"uk"=>"pl-uk"}], "pt"=>[{"en"=>"pt-en"}, {"ru"=>"pt-ru"}], "ro"=>[{"be"=>"ro-be"}, {"ru"=>"ro-ru"}, {"uk"=>"ro-uk"}], "ru"=>[{"az"=>"ru-az"}, {"be"=>"ru-be"}, {"bg"=>"ru-bg"}, {"ca"=>"ru-ca"}, {"cs"=>"ru-cs"}, {"da"=>"ru-da"}, {"de"=>"ru-de"}, {"el"=>"ru-el"}, {"en"=>"ru-en"}, {"es"=>"ru-es"}, {"et"=>"ru-et"}, {"fi"=>"ru-fi"}, {"fr"=>"ru-fr"}, {"hr"=>"ru-hr"}, {"hu"=>"ru-hu"}, {"hy"=>"ru-hy"}, {"it"=>"ru-it"}, {"lt"=>"ru-lt"}, {"lv"=>"ru-lv"}, {"mk"=>"ru-mk"}, {"nl"=>"ru-nl"}, {"no"=>"ru-no"}, {"pl"=>"ru-pl"}, {"pt"=>"ru-pt"}, {"ro"=>"ru-ro"}, {"sk"=>"ru-sk"}, {"sl"=>"ru-sl"}, {"sq"=>"ru-sq"}, {"sr"=>"ru-sr"}, {"sv"=>"ru-sv"}, {"tr"=>"ru-tr"}, {"uk"=>"ru-uk"}], "sk"=>[{"en"=>"sk-en"}, {"ru"=>"sk-ru"}], "sl"=>[{"en"=>"sl-en"}, {"ru"=>"sl-ru"}], "sq"=>[{"en"=>"sq-en"}, {"ru"=>"sq-ru"}], "sr"=>[{"be"=>"sr-be"}, {"ru"=>"sr-ru"}, {"uk"=>"sr-uk"}], "sv"=>[{"en"=>"sv-en"}, {"ru"=>"sv-ru"}], "tr"=>[{"be"=>"tr-be"}, {"de"=>"tr-de"}, {"en"=>"tr-en"}, {"ru"=>"tr-ru"}, {"uk"=>"tr-uk"}], "uk"=>[{"bg"=>"uk-bg"}, {"cs"=>"uk-cs"}, {"de"=>"uk-de"}, {"en"=>"uk-en"}, {"es"=>"uk-es"}, {"fr"=>"uk-fr"}, {"it"=>"uk-it"}, {"pl"=>"uk-pl"}, {"ro"=>"uk-ro"}, {"ru"=>"uk-ru"}, {"sr"=>"uk-sr"}, {"tr"=>"uk-tr"}]}

  validates :text, presence: true
  validates :translated_text, presence: true
  validates :lang, presence: true

  before_validation do
    self.translated_text = yandex.translate(text, lang).first if !translated_text.nil? && translated_text.empty?
  end
end
